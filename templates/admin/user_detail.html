{% extends "../base.html" %}

{% block title %}User Detail - Admin{% endblock %}

{% block content %}
<div class="container">
    <h1>User: {{ user.username }}</h1>
    <p>Email: {{ user.email }}</p>
    <p>Created: {{ user.created_at }}</p>
    <p>Admin: {{ 'Yes' if user.is_admin else 'No' }}</p>

    <hr>
    <h2>Reset Password</h2>
    <form method="post">
        {{ form.hidden_tag() }}
        <div>
            {{ form.password.label }}<br>
            {{ form.password(class_="form-control", placeholder="New password") }}
        </div>
        <div style="margin-top:8px;">
            {{ form.password2.label }}<br>
            {{ form.password2(class_="form-control", placeholder="Confirm password") }}
        </div>
        <div style="margin-top:12px;">
            {{ form.submit(class_="btn btn-primary") }}
        </div>
    </form>

    <hr>
    <h2>Statistics</h2>
    <p>Total transcriptions: {{ total_transcriptions }}</p>
    <p>Completed: {{ completed_transcriptions }}</p>
    <p>Total file size: {{ total_file_size }} bytes</p>

    <hr>
    <h2>Transcriptions</h2>
    <ul>
        {% for t in transcriptions %}
            <li>
                {{ t.original_filename }} - {{ t.status }} - {{ t.created_at }}
                {% if t.output_file %}
                    <a href="{{ url_for('download_file', filename=t.output_file) }}">Download</a>
                {% endif %}
            </li>
        {% else %}
            <li>No transcriptions</li>
        {% endfor %}
    </ul>
</div>
{% endblock %}